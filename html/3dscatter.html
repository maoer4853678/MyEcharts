<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>3D散点图</title>
    <!-- 引入 echarts.js -->
    <script src="../js/echarts.min.js"></script>
    <script src="../js/echarts-gl.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1500px;height:450px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例

        var myChart = document.getElementById('main');
        if (window.innerWidth>50) 
    {
        if (window.innerHeight>50) 
        {
            myChart.style.width = window.innerWidth-30+'px';
            myChart.style.height = window.innerHeight-30+'px';
        }   
    }
             
var itemStyle = {
    normal: {
        opacity: 0.8,
        shadowBlur: 10,
        shadowOffsetX: 0,
        shadowOffsetY: 0,
        shadowColor: 'rgba(0, 0, 0, 0.5)'
    }
};
    var alldata = {"A": [["var1", "var2", "var3", "class", "var4"], [0.3096163903163329, 15.205550894920364, 0.8900306186363123, "A", 9.872831372827696], [4.1774174302026825, 6.4924328432484835, 0.3719926618260505, "A", 27.640792836214256], [1.4713270244791943, 3.3564918045536807, 0.8308669320726555, "A", 9.011432220748228], [8.448830936170678, 16.27782150989465, 0.034446213877697085, "A", 26.344637410601724], [1.1267862896432368, 8.13177155428465, 0.30227362510832134, "A", 3.4613605837395145], [1.425873979154929, 3.3451859888999214, 0.977375666237986, "A", 23.233194496404813], [7.928441458574901, 16.78014407829946, 0.7786166662445716, "A", 45.25442866439672], [0.2667013334524915, 10.895052814519051, 0.6454425530379535, "A", 37.51512897962825], [6.433810601618191, 9.53980488250195, 0.832274157365212, "A", 0.6137942959649312], [5.228070478219248, 8.477504182375615, 0.14360590558325492, "A", 48.7448639821724], [0.10702181386062493, 16.133609146767903, 0.36447763997794347, "A", 40.69312093605654], [8.968147490129512, 7.732615465486454, 0.6771985580684201, "A", 16.970065192817806], [6.7581985500177835, 16.033660725169298, 0.8810513803847742, "A", 45.5292481634345], [8.65621886297984, 16.261288667881445, 0.13926153157809595, "A", 41.91521548576065], [7.795223414681519, 5.2316720618709684, 0.31818748942310215, "A", 1.4305242018546604], [2.6204822444125107, 5.499430070652771, 0.20956151536187773, "A", 8.94536791264171], [4.961082379563532, 18.946855952421608, 0.7367413190223852, "A", 25.895110258503674], [0.1910437429827161, 16.33190890382497, 0.5055595552472238, "A", 39.182970848938076], [4.8059274531099, 10.287052050260622, 0.31110404153843263, "A", 28.033460596393116], [3.2171005850614023, 10.449491311782346, 0.6108940798662176, "A", 26.553694310073023], [9.063306263848949, 19.531741116013336, 0.9364218423471853, "A", 3.3533185826393694], [9.140995299787024, 13.031926524172313, 0.23177430872704197, "A", 46.74691197711291], [5.583719761965389, 16.969431790771047, 0.19241011427530608, "A", 36.46841806026372], [4.2095695628615, 17.876063999332125, 0.7600686042890091, "A", 21.966801627380693], [7.93174728475312, 1.2241693757617034, 0.11036574079678763, "A", 29.209169606405183], [4.707485857318727, 5.141603656978047, 0.44448230962777646, "A", 15.571569207837394], [4.6502300587587255, 16.70557799440249, 0.06826482639042075, "A", 35.080632295033794], [2.926011536735804, 11.205240669380752, 0.7099688725400227, "A", 24.00529864071658], [5.7036627030881455, 0.9879298731198594, 0.35852909625709417, "A", 16.201603944796172], [0.19519115640322604, 14.112139179386787, 0.3761224028887662, "A", 49.947090326079135], [3.3943117915433207, 17.06196862205687, 0.8692269689921424, "A", 46.11889940828765], [9.401025120816307, 2.945522306161581, 0.382001111635234, "A", 47.60557087750324], [3.896502444858978, 14.685710088011891, 0.13344188222332332, "A", 13.704625029024225], [3.920153955128318, 13.321409412040982, 0.224203351679777, "A", 28.15350951553764], [9.861539267803556, 10.920055364660238, 0.005437152001414813, "A", 6.187424917146522], [3.1391870409993006, 10.055366378802304, 0.056872965628783745, "A", 28.853905208269754], [8.029992526837074, 3.411230210583931, 0.22853412048507393, "A", 45.5609544163054], [0.0004700312129923834, 9.12210010686342, 0.07732380664044691, "A", 38.245516962232614], [5.094124588331905, 2.1398075819384577, 0.4228254710724195, "A", 34.848903586900285], [0.8762356622747236, 10.2383953498095, 0.9435065989938755, "A", 21.390160734822537], [7.825116436508503, 5.404905030733545, 0.415459724430138, "A", 28.748806345875476], [3.2315299578821954, 6.209210397619779, 0.6647396512616224, "A", 10.378879128612212], [6.3023966937830975, 13.022387668339734, 0.8275723150154226, "A", 2.162589539543408], [1.4956884774051482, 0.07044903578752093, 0.9470649439534794, "A", 41.22678848650667], [9.59209313081436, 19.569502176593893, 0.2940430170330689, "A", 1.0742473287120247], [3.193668680080176, 17.209976654516957, 0.6503960931026918, "A", 4.297090832510609], [2.8242820849170824, 16.477265901548275, 0.2668970041444556, "A", 27.109456070256694], [6.370628577928322, 13.39934869624784, 0.826073543186232, "A", 2.1501644661328365], [8.765207649894883, 13.37562576730843, 0.3931417928190615, "A", 4.108407345957], [2.2117989324776866, 4.934505422785089, 0.2196083483239344, "A", 18.610075794783526]], "B": [["var1", "var2", "var3", "class", "var4"], [3.793890561737533, 0.7719497885795312, 0.34339747915766006, "B", 5.590282542180297], [8.061132531328534, 12.704796172761885, 0.8513196436017212, "B", 0.17504751317740097], [5.1975217653434, 6.921156939784638, 0.8388626278759735, "B", 2.057465568023548], [5.613897024783339, 12.646694959124428, 0.210583644352223, "B", 0.7011818209472498], [8.811568133371413, 11.832588177891743, 0.5219315782980251, "B", 18.266112454042027], [2.4075345471368594, 14.065358886559014, 0.585272212314311, "B", 4.7831574080553825], [8.679062961507551, 7.310614316250927, 0.4510666491106434, "B", 33.56315505740667], [7.2343489187845575, 14.81470508929262, 0.39655916799532087, "B", 34.634789921280806], [2.187120896560711, 6.572521148608699, 0.3728153450816506, "B", 5.4206136101217055], [6.445931412415192, 1.877134027682883, 0.09535047047189504, "B", 16.93551608254662], [3.4977839905035357, 19.493432700026126, 0.3897412610132306, "B", 42.030392900247165], [1.7711724143330188, 4.046536702912393, 0.9264814513687909, "B", 22.03516118847065], [6.319154988281065, 5.334343718775569, 0.15364488931389275, "B", 10.931585934051391], [6.3129224264088935, 11.682115892092153, 0.8379033152439552, "B", 30.04582365577343], [5.363616115590261, 19.671234320153946, 0.7803859805904282, "B", 17.63525527130707], [3.135158828021558, 18.634787865800195, 0.8809867242082263, "B", 8.957598700099245], [9.174506702712279, 4.8976138605500825, 0.06836511246993204, "B", 38.18171913330243], [3.7580468070673714, 4.771543954768907, 0.8394891094215908, "B", 41.80429976338463], [3.7947493719639382, 6.966688554081227, 0.20279535311735586, "B", 15.67565973355049], [3.155929972186522, 9.085222330136807, 0.39880885831255486, "B", 23.129816361708343], [1.9782782649001174, 6.347228775469455, 0.9508370723605263, "B", 45.954015549170165], [0.1046550175027472, 9.56176643669044, 0.641523752318559, "B", 17.27069190506585], [9.888876764679257, 3.6253454175008293, 0.8509332969417129, "B", 10.234404924557284], [7.925270280245426, 15.833721655238813, 0.737420230838909, "B", 14.890887358332877], [0.6955644596286548, 1.3999576542888903, 0.3959025565735921, "B", 39.004966445663655], [1.8425756021192152, 9.605502932081942, 0.7926654765035465, "B", 35.13428837572003], [4.1085141273582, 18.02108867712366, 0.33018733136321265, "B", 46.908766948196806], [7.515037570201192, 1.8000959974340236, 0.35617739968411777, "B", 24.038106175648384], [0.09514503585314693, 16.02506333331249, 0.7266371960852027, "B", 22.329710125876506], [6.676833042989479, 1.1328520092093597, 0.9251508082827862, "B", 34.57966349298482], [1.6755770130140213, 11.16425114791696, 0.2227897885684208, "B", 45.38786027423349], [0.32910630024434173, 11.054729700962909, 0.5383513530596956, "B", 20.659758244251254], [9.056299976443881, 3.365949566785633, 0.37954268233238275, "B", 46.01786677604334], [0.09901077621893961, 19.676439300054557, 0.3221800023184248, "B", 40.46173970658166], [3.9519328208405025, 6.009757856289579, 0.6438228669951642, "B", 43.665214693694146], [0.9343022967592951, 3.470012038481358, 0.9411488359204417, "B", 11.764148615421677], [7.881160112653279, 18.506454817906004, 0.9326922825840918, "B", 0.6867224279280437], [9.807169452891834, 6.509243957072151, 0.9454299327837031, "B", 1.646865144201115], [0.8429575704579828, 3.0777730895972444, 0.21177618524539055, "B", 47.8287319247017], [6.695164826834025, 15.9787618578513, 0.4702712121768873, "B", 47.0086138353426], [6.352568555910781, 16.761846542785438, 0.03291809076965768, "B", 33.307258841540936], [8.387508167039702, 9.335995871643124, 0.3017396428464433, "B", 43.60360753958087], [3.8075625253920786, 17.451602040301445, 0.7005503822316199, "B", 13.092722260097789], [7.226508478047599, 5.594965305856066, 0.6352381892297756, "B", 16.422632672088945], [2.802589655860104, 1.8688225140816095, 0.6223911420142729, "B", 35.094096555451095], [1.6010444824955894, 2.9890552343314503, 0.713609521281109, "B", 45.411122944045445], [4.938962844137364, 7.469179414090723, 0.23570837718670734, "B", 3.249964120648219], [1.2621983208027587, 2.536529691108811, 0.8158151536354638, "B", 1.7653481560211737], [7.1203220143192425, 8.208879817942861, 0.9362176592543919, "B", 12.641400165166822], [2.498612282726355, 11.983674266073841, 0.5865019824441637, "B", 33.75015164990178]]}
    var types = ["value", "value", "value"]
    var columns = {"Y": "var2", "X": "var1", "Z": "var3", "T": "var4"}
    var other = 'var4'
    var mm = {"Y": [0.07044903578752093, 19.676439300054557], "X": [0.0004700312129923834, 9.888876764679257], "Z": [0.005437152001414813, 0.977375666237986], "T": [0.17504751317740097, 49.947090326079135]}
    var visual = 1
    var colorList = [
                          '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
                           '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
                           '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
                        ];
    var myChart = echarts.init(myChart); 

    var symbolSize = 5;
    option = {
        toolbox: {
            show : true,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        visualMap: [
        ],
        grid3D: {},
        xAxis3D: {
            type: types[0]
        },
        legend:{data:[]},
        yAxis3D: {
            type: types[1]
        },
        zAxis3D: {
            type: types[2]
        },
        dataset: [],
        series: [
        ]
    };
    
     load()

function load()
    {

		maps = [{
            text:["Xmax","Xmin"],
            dimension:0,
            min:mm['X'][0],
            max:mm['X'][1],
            calculable: true,
            left: 'left',
            bottom: '55%',
            },
        {
            text:["Ymax","Ymin"],
            dimension:1,
            min:mm['Y'][0],
            max:mm['Y'][1],
            calculable: true,
            left: 'left',
            bottom: '10%',
        },
        {
            text:["Zmax","Zmin"],
            dimension:2,
            min:mm['Z'][0],
            max:mm['Z'][1],
            calculable: true,
            left: 'right',
            bottom: '55%',

        }]
        if (visual==1)
        {
			 option.visualMap = maps
			 if (other!='')
	        {
	            temp = {
	            text:[other+"_max",other+"_min"],
	            dimension:columns['T'],
	            min:mm['T'][0],
	            max:mm['T'][1],
	            calculable: true,
	            left: 'right',
	            bottom: '10%',
	            }
	            option.visualMap.push(temp)
	        }
        }
   
        n=0
        legend = []
        for (key in alldata)
        {
            data = {
                    source: alldata[key]
                }

            temp = {   
                name:key,
                type: 'scatter3D',
                symbolSize: symbolSize,
                encode: {
                    x: columns['X'],
                    y: columns['Y'],
                    z: columns['Z'],
                    tooltip: [0, 1, 2, 3,4]
                },
                datasetIndex :n,
            }
            option.dataset.push(data)
            option.series.push(temp)
            legend.push(key)
        n=n+1
        }
        option.legend.data = legend
        myChart.setOption(option);
    }

    </script>
</body>
</html>