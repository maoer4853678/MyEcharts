<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>3D散点图</title>
    <!-- 引入 echarts.js -->
    <script src="../js/echarts.min.js"></script>
    <script src="../js/echarts-gl.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1500px;height:450px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例

        var myChart = document.getElementById('main');
        if (window.innerWidth>50) 
    {
        if (window.innerHeight>50) 
        {
            myChart.style.width = window.innerWidth-30+'px';
            myChart.style.height = window.innerHeight-30+'px';
        }   
    }
             
var itemStyle = {
    normal: {
        opacity: 0.8,
        shadowBlur: 10,
        shadowOffsetX: 0,
        shadowOffsetY: 0,
        shadowColor: 'rgba(0, 0, 0, 0.5)'
    }
};
    var alldata = {"A": [["var1", "var2", "var3", "class", "var4"], [6.613244281900538, 16.028256924197983, 0.28317633038504, "A", 28.55375148799843], [8.672092496425165, 2.546538690320017, 0.5829435915486534, "A", 22.387347944358005], [9.609100798647006, 15.477501888172768, 0.8208320292980975, "A", 33.227761451336384], [0.32805631260644064, 12.045966722618589, 0.293436458740268, "A", 33.447433509196095], [0.9245666262898788, 12.015794608777668, 0.44538622434943653, "A", 35.119021145964865], [0.6063835426206443, 1.925115011898626, 0.7778788822239519, "A", 4.0729419115913155], [6.8200506969354215, 8.158056741898248, 0.7986826246163302, "A", 16.51616601589982], [9.864926788255062, 2.358463934105628, 0.1401660727487749, "A", 31.02339892674591], [8.828351970587029, 11.915821871636016, 0.45012652817227516, "A", 29.0781110817773], [3.7987784782916325, 13.428130447324422, 0.18634504078214043, "A", 26.65715209355513], [7.811215045043117, 6.590094918547031, 0.25912390306529864, "A", 23.84647327970491], [8.54016031410566, 5.972899364182269, 0.19610505730900596, "A", 19.74172601151159], [8.526706134778804, 18.023017963878523, 0.5870568405937492, "A", 7.29238330655983], [1.2225166041840352, 14.908642710873137, 0.5978550124818617, "A", 20.957699953385855], [4.001664955200807, 2.9733711058600187, 0.8901725042480654, "A", 24.007691452195484], [4.292090259784478, 19.58896688589522, 0.1634612165440461, "A", 0.03996435642353857], [6.65995756016521, 19.063358715731408, 0.7586123461876187, "A", 35.458766971495244], [9.62821530926962, 6.631028614013362, 0.9956893282210716, "A", 27.062662265867672], [3.6528577432023726, 11.806942979410817, 0.08249207548932913, "A", 12.424499439270809], [4.523418921268937, 7.209169090193843, 0.27852261238862863, "A", 20.20313290354341], [7.451103782297853, 0.32491954722337457, 0.38799554503126643, "A", 23.194413166311605], [9.735175232370318, 2.9301061124111416, 0.5079158464702105, "A", 47.64037743183261], [7.4895559636284545, 1.8755004258337782, 0.6819241171792225, "A", 4.538485276136078], [5.8896964324117835, 13.242452546635956, 0.005901247078690441, "A", 9.907624622847266], [9.818297655678352, 13.380769237547177, 0.8171044200371446, "A", 9.059878383510188], [3.091909672921158, 11.532287838029031, 0.12734390267630036, "A", 41.16369638743248], [4.686136722723317, 8.34526843468171, 0.20262140576113064, "A", 34.708042518435946], [2.6894113033799574, 2.2064719800436494, 0.22070098936096294, "A", 47.8829815391556], [9.519071668056242, 17.350092342126516, 0.3591478667749869, "A", 7.963545789712506], [4.992114081498544, 0.33707940300850225, 0.8773297381036663, "A", 49.16720308520841], [7.2758239470511725, 2.981860977255908, 0.010188110402372441, "A", 22.35213198028018], [5.919363694762531, 8.575527737238396, 0.292327315151252, "A", 31.050477668108584], [3.8700068603910234, 1.2745549699761716, 0.4873569401211929, "A", 8.694714685351473], [2.18109183802628, 1.4236040972366593, 0.4445329203726659, "A", 13.009975851576105], [6.75038513474123, 14.885325449898518, 0.8711764470533289, "A", 43.57470926003019], [1.3055843171437376, 2.4424144532259495, 0.08746949058751763, "A", 0.5312093532918782], [9.55156121681181, 7.5452123045396196, 0.5127978746098504, "A", 21.889922764067915], [4.869918301384844, 11.989413234520189, 0.9662851803380992, "A", 29.61292807231985], [6.503421968471553, 17.195176846710382, 0.4735451318143231, "A", 22.545935358618912], [3.4082568174677363, 0.4933976141963847, 0.014004626572370893, "A", 14.37542588492558], [3.3615969493971196, 1.57811862785608, 0.9439356662402827, "A", 10.466652119945918], [6.140191169639781, 2.642808559332237, 0.9968250899957728, "A", 35.50189904749478], [8.921112987241402, 5.698924845599132, 0.13440673734771025, "A", 1.1476003783546407], [9.396354278373735, 16.20502550769214, 0.6721408384949027, "A", 31.747796400551888], [5.367117230415646, 0.4718744109621631, 0.8451225091280382, "A", 8.947083603063927], [1.923459513908432, 6.627862794548658, 0.8719899253284884, "A", 35.6896293355126], [9.019854213952176, 19.577383291483404, 0.6649158963253148, "A", 39.64488974179121], [9.559295709211167, 19.82568548286955, 0.554281172478734, "A", 42.229820863877485], [3.5556667420555357, 17.444151423003568, 0.1753968020197504, "A", 38.84522004668745], [3.565593524140973, 0.9895996923455974, 0.5085719510310887, "A", 23.826250349774003]], "B": [["var1", "var2", "var3", "class", "var4"], [9.602864169080688, 3.907474329512972, 0.7257644766165873, "B", 43.68228315350198], [2.280731312254911, 10.202941644071263, 0.9765082145273968, "B", 31.859747756288044], [4.93440789196662, 17.931740207363195, 0.22319763887484523, "B", 18.934964420460567], [2.1673529933716984, 2.3668380296419134, 0.8832923627248866, "B", 46.37643139630407], [5.177842361846166, 17.220776044748906, 0.6848807650454716, "B", 21.45350952471302], [5.794846252127799, 13.963783039235269, 0.21781757309913174, "B", 10.981948757491983], [5.268703295835998, 6.120464712175535, 0.608940857990012, "B", 48.19349126870272], [8.043560292382217, 10.739434532268428, 0.6835333654114875, "B", 5.774394937645855], [6.4132455209147565, 15.342699155687063, 0.9998021465125703, "B", 48.97109756709079], [3.178704971549182, 12.883018625917293, 0.6534287588839566, "B", 0.9930752392622255], [2.946344629361376, 1.18233031015206, 0.5199569912831536, "B", 35.7574641735297], [1.3970968875143852, 13.972558775799763, 0.1042726856908831, "B", 47.42506125046338], [0.4430659377731694, 12.465509246328814, 0.865468751056152, "B", 0.1328265478291346], [6.824734247496265, 14.246249949594414, 0.5150054792449007, "B", 30.62490012619765], [0.9538044969860737, 0.5796318125937994, 0.11049053786607932, "B", 10.684507356909767], [7.142256597452217, 7.775927648010845, 0.7811968315309784, "B", 34.82767208739874], [8.426348706273728, 19.208497211486545, 0.44598200426559387, "B", 38.11023929889917], [0.8140893448261399, 7.902092523776076, 0.8039425130523469, "B", 36.34926989718527], [0.9725756413326914, 11.21175982436293, 0.8073071859449086, "B", 37.87427248848997], [7.326929731084666, 16.12073249938983, 0.3738803400650731, "B", 23.218852592448215], [0.8867390040022505, 13.045664998174924, 0.5354931642181009, "B", 27.05094438376829], [5.662697699349787, 1.523228211006944, 0.35552814959427115, "B", 3.9445146987145794], [9.596122590666425, 13.747600837584928, 0.48485821201778523, "B", 17.15243708449116], [4.748871165650364, 17.188219591913796, 0.11875475804787672, "B", 24.71905791953879], [9.206378915585345, 8.409166798906494, 0.10811969334765026, "B", 38.89326459500387], [9.137813334534886, 17.250649240409228, 0.356315361669555, "B", 14.507304611153282], [4.6717141647236105, 10.017109253737162, 0.8425545850780631, "B", 36.37167712664648], [6.458106185563347, 8.872652325034254, 0.7136467538444674, "B", 7.430126295738998], [8.816612114675705, 6.681709845230992, 0.2168792831541072, "B", 35.03645930909248], [0.21878493803604293, 14.298209574159186, 0.8573439308996029, "B", 44.35790144473402], [2.496657967897644, 10.15709165934144, 0.5598088153642868, "B", 45.85307582417], [0.3522724970695046, 6.159482656865527, 0.5233487900572602, "B", 14.711143006514899], [7.814065498395628, 14.15342768313872, 0.6630068604698929, "B", 30.93549062172052], [8.997285767230975, 15.697657353546223, 0.05387826449090538, "B", 45.695139573987184], [9.32651786581045, 18.85537499619515, 0.9560019341280745, "B", 18.609135700123712], [3.7512664775798155, 11.950675694880388, 0.10268766540779306, "B", 19.128593139495294], [1.7014322592276987, 12.975763358196694, 0.7984108479966333, "B", 39.12194552049629], [3.4342795441410923, 19.59632371398446, 0.3494158386962163, "B", 18.231952413994335], [2.91324372997807, 14.54344216815728, 0.8051479834441259, "B", 0.2547875854486792], [8.536721533183822, 14.069522111087952, 0.31320809227204205, "B", 20.054240473289838], [3.230078423227752, 9.74586838056024, 0.5219961042780609, "B", 46.55016727197771], [1.3742537053375314, 11.54845532950948, 0.8313742215879782, "B", 5.399815074149522], [9.118842354204745, 17.439140313481637, 0.9192549363683815, "B", 32.95527754627995], [5.684224809332496, 10.221268534230795, 0.585437301500036, "B", 38.34997471266269], [2.8101400827226164, 18.3258694542897, 0.42394633252956293, "B", 7.022116090739722], [2.949240088751913, 12.690049785691782, 0.7643015918659232, "B", 24.672886425481572], [2.397804607354489, 12.385191857847262, 0.7105871897776195, "B", 40.02302893599841], [7.50705322501272, 5.693874339242391, 0.06992501151872876, "B", 1.4937207179244294], [3.113623013803867, 5.80257669298589, 0.06719339137675018, "B", 2.65486768786638], [7.698641588895889, 2.9099291046467024, 0.6392396771883839, "B", 40.83144840361655]]}
    var types = ["value", "value", "value"]
    var columns = {"Y": "var2", "X": "var1", "Z": "var3", "T": "var4"}
    var other = 'var4'
    var mm = {"Y": [0.32491954722337457, 19.82568548286955], "X": [0.21878493803604293, 9.864926788255062], "Z": [0.005901247078690441, 0.9998021465125703], "T": [0.03996435642353857, 49.16720308520841]}
    var colorList = [
                          '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
                           '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
                           '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
                        ];
    var myChart = echarts.init(myChart); 

    var symbolSize = 5;
    option = {
        toolbox: {
            show : true,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        visualMap: [{
            text:["Xmax","Xmin"],
            dimension:0,
            min:mm['X'][0],
            max:mm['X'][1],
            calculable: true,
            orient: 'horizontal',
            left: '20%',
            bottom: '85%',
            },
        {
            text:["Ymax","Ymin"],
            dimension:1,
            min:mm['Y'][0],
            max:mm['Y'][1],
            calculable: true,
            bottom: '50%',
        },
        {
            text:["Zmax","Zmin"],
            dimension:2,
            min:mm['Z'][0],
            max:mm['Z'][1],
            calculable: true,
            left: 'right',
            bottom: '50%',

        }
        ],
        grid3D: {},
        xAxis3D: {
            type: types[0]
        },
        legend:{data:[]},
        yAxis3D: {
            type: types[1]
        },
        zAxis3D: {
            type: types[2]
        },
        dataset: [],
        series: [
        ]
    };
    
     load()

function load()
    {
        if (other!='')
        {
            temp = {
            text:[other+"_max",other+"_min"],
            dimension:columns['T'],
            min:mm['T'][0],
            max:mm['T'][1],
            orient: 'horizontal',
            calculable: true,
            left: '65%',
            bottom: '85%',
            }
            option.visualMap.push(temp)
        }
        n=0
        legend = []
        for (key in alldata)
        {
            data = {
                    source: alldata[key]
                }

            temp = {   
                name:key,
                type: 'scatter3D',
                symbolSize: symbolSize,
                encode: {
                    x: columns['X'],
                    y: columns['Y'],
                    z: columns['Z'],
                    tooltip: [0, 1, 2, 3,4]
                },
                datasetIndex :n,
            }
            option.dataset.push(data)
            option.series.push(temp)
            legend.push(key)
        n=n+1
        }
        option.legend.data = legend
        myChart.setOption(option);
    }

    </script>
</body>
</html>